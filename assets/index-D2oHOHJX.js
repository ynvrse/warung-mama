import{d as f,r as m,j as e}from"./theme-provider-C3d4einS.js";import{B as r,P as k}from"./App-DM7DqXAy.js";import{i as v,I as u,g as y,e as C,t as h,a as p}from"./env-8iG8GCiW.js";import{U as I,L as l}from"./label-BenH-344.js";import{t as i}from"./index-rbqaS3as.js";import{A as P}from"./AddCategoryModal-Bm4E53nh.js";import"./index-B5KUuKpD.js";import"./Combination-B9ghzp8d.js";const z=()=>{const t=f(),[x,b]=m.useState(!1),d=v({appId:C.instantDbAppId}),{data:c}=d.useQuery({categories:{}}),n=(c==null?void 0:c.categories)||[],[a,o]=m.useState({name:"",price:0,categoryId:n.length>0?n[0].id:"ac9928a9-cdd5-4d8e-b145-ab6353fb1440"}),g=()=>{if(!a.name.trim()){i.error("Nama produk wajib diisi");return}if(!a.price||a.price<=0){i.error("Harga harus lebih dari 0");return}if(!a.categoryId){i.error("Pilih kategori terlebih dahulu");return}d.transact([h.products[p()].update({...a,createdAt:new Date})]),i.success("Produk berhasil ditambahkan"),t("/")},j=s=>d.transact([h.categories[p()].create({...s})]);return e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx("div",{className:"bg-background sticky top-0 z-40 border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tambah Produk Baru"}),e.jsxs(r,{size:"icon",onClick:()=>t("/"),children:[e.jsx(I,{}),e.jsx("span",{className:"sr-only",children:"Kembali"})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"product-name",className:"mb-2 block text-base font-medium",children:["Nama Produk",e.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),e.jsx(u,{autoFocus:!0,id:"product-name",value:a.name,onChange:s=>o({...a,name:s.target.value}),placeholder:"Masukkan nama produk",className:"h-12 text-base"})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"product-price",className:"mb-2 block text-base font-medium",children:["Harga",e.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),e.jsx(u,{id:"product-price",type:"number",inputMode:"decimal",min:0,value:a.price||"",onChange:s=>o({...a,price:Number(s.target.value)}),placeholder:"Masukkan harga",className:"h-12 text-base"})]}),e.jsxs("div",{children:[e.jsxs(l,{className:"mb-2 block text-base font-medium",children:["Pilih Kategori",e.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),e.jsx("div",{className:"bg-muted/20 mt-2 grid grid-cols-3 gap-3 rounded-lg border p-3",children:n.map(s=>{const N=y(s.icon);return e.jsxs(r,{variant:a.categoryId===s.id?"default":"outline",onClick:()=>o({...a,categoryId:s.id}),className:"flex h-16 flex-col items-center justify-center gap-2 p-3",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{className:"truncate text-xs font-medium",children:s.name})]},s.id)})}),e.jsxs(r,{variant:"outline",onClick:()=>{t("/add-category")},className:"border-primary text-primary hover:bg-primary/5 mt-3 h-12 w-full border-dashed",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Tambah Kategori Baru"]})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx(r,{variant:"outline",onClick:()=>t("/"),className:"h-12 flex-1",children:"Batal"}),e.jsx(r,{onClick:g,className:"h-12 flex-1",disabled:!a.name.trim()||!a.price||!a.categoryId,children:"Tambah"})]})]}),e.jsx(P,{open:x,onClose:()=>b(!1),addCategory:j})]})};export{z as default};
